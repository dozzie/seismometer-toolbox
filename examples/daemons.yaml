defaults:
  # immediate, after 5s, after 10s, after 1 minute, try again each 5 minutes
  restart: [0, 5, 10, 60, 300]
  #cwd: directory
  environment:
    PYTHONPATH: lib

daemons:
  streem:
    cwd: ../streem
    environment:
      ERL_LIBS: "."
    start_command: escript dist/run.erl 10101
    #stop_command: ...
    #stop_signal: TERM | SIGTERM | 15

    #stdout: log
    #stdout:
    #  type: streem
    #  port: 10101
    #  channel: streem_logs
    #  host: localhost

  dumb-probe:
    start_command: "bin/dumb-probe --destination=localhost:10101:probes --checks=examples/dumb_probe_sample_configuration"

  state-forwarder:
    start_command: "bin/pull-push-bridge --source=localhost:10101:probes --destination=localhost:10101:states --plugin=state_forwarder"

  webasdb-bridge:
    start_command: "bin/pull-push-bridge --source=localhost:10101:states --destination=http://localhost:10080 --plugin=webasdb"

  collectd-bridge:
    start_command: "bin/pull-push-bridge --source=localhost:10101:probes --destination=../_dashboards/collectd/collectd.sock --plugin=collectd"
